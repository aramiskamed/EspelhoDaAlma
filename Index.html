<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Espelho da Alma â€” DiÃ¡rio Elemental</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>ğŸª Espelho da Alma</h1>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="diario">DiÃ¡rio de Hoje</button>
      <button class="tab-btn" data-tab="historico">HistÃ³rico & TendÃªncias</button>
      <button class="tab-btn" data-tab="ajuda">Guia & MÃ©todo</button>
    </nav>
  </header>

  <main>
    <!-- DIÃRIO -->
    <section id="diario" class="tab-content active">
      <div class="card">
        <div class="flex-row gap">
          <div>
            <label for="dataEntrada">Data</label>
            <input id="dataEntrada" type="date" />
          </div>
          <div class="grow"></div>
          <div class="actions-row">
            <button id="btnLimparHoje" class="ghost">Limpar</button>
            <button id="btnSalvarHoje" class="primary">Salvar sessÃ£o</button>
          </div>
        </div>
      </div>

      <!-- FOGO -->
      <section class="element-section">
        <h2>ğŸ”¥ Fogo</h2>
        <p class="pergunta">Hoje usei minha energia com entusiasmo e clareza, ou fui impulsivo/irado?</p>
        <div class="grid-2">
          <div>
            <h3>Qualidades Positivas</h3>
            <div class="check-grid" data-element="fogo" data-type="positivo">
              <label><input type="checkbox" value="Coragem" /> Coragem</label>
              <label><input type="checkbox" value="DeterminaÃ§Ã£o" /> DeterminaÃ§Ã£o</label>
              <label><input type="checkbox" value="AutoconfianÃ§a" /> AutoconfianÃ§a</label>
              <label><input type="checkbox" value="Entusiasmo, vitalidade" /> Entusiasmo, vitalidade</label>
              <label><input type="checkbox" value="LideranÃ§a natural" /> LideranÃ§a natural</label>
              <label><input type="checkbox" value="Clareza e poder de decisÃ£o" /> Clareza e poder de decisÃ£o</label>
            </div>
          </div>
          <div>
            <h3>Qualidades Negativas</h3>
            <div class="check-grid" data-element="fogo" data-type="negativo">
              <label><input type="checkbox" value="Ira, agressividade" /> Ira, agressividade</label>
              <label><input type="checkbox" value="Ã“dio, violÃªncia" /> Ã“dio, violÃªncia</label>
              <label><input type="checkbox" value="Orgulho excessivo" /> Orgulho excessivo</label>
              <label><input type="checkbox" value="ImpaciÃªncia" /> ImpaciÃªncia</label>
              <label><input type="checkbox" value="Desejo de domÃ­nio sobre os outros" /> Desejo de domÃ­nio sobre os outros</label>
              <label><input type="checkbox" value="Crueldade" /> Crueldade</label>
            </div>
          </div>
        </div>
      </section>

      <!-- ÃGUA -->
      <section class="element-section">
        <h2>ğŸ’§ Ãgua</h2>
        <p class="pergunta">Fui paciente e compassivo, ou fiquei preso em apegos/tristezas?</p>
        <div class="grid-2">
          <div>
            <h3>Qualidades Positivas</h3>
            <div class="check-grid" data-element="agua" data-type="positivo">
              <label><input type="checkbox" value="Amor, compaixÃ£o" /> Amor, compaixÃ£o</label>
              <label><input type="checkbox" value="PaciÃªncia, calma" /> PaciÃªncia, calma</label>
              <label><input type="checkbox" value="DedicaÃ§Ã£o, capacidade de nutrir" /> DedicaÃ§Ã£o, capacidade de nutrir</label>
              <label><input type="checkbox" value="Sensibilidade e empatia" /> Sensibilidade e empatia</label>
              <label><input type="checkbox" value="IntuiÃ§Ã£o refinada" /> IntuiÃ§Ã£o refinada</label>
              <label><input type="checkbox" value="Capacidade de adaptaÃ§Ã£o" /> Capacidade de adaptaÃ§Ã£o</label>
            </div>
          </div>
          <div>
            <h3>Qualidades Negativas</h3>
            <div class="check-grid" data-element="agua" data-type="negativo">
              <label><input type="checkbox" value="PreguiÃ§a, inÃ©rcia" /> PreguiÃ§a, inÃ©rcia</label>
              <label><input type="checkbox" value="DependÃªncia emocional" /> DependÃªncia emocional</label>
              <label><input type="checkbox" value="Melancolia, vitimismo" /> Melancolia, vitimismo</label>
              <label><input type="checkbox" value="CiÃºme e apego excessivo" /> CiÃºme e apego excessivo</label>
              <label><input type="checkbox" value="Covardia, submissÃ£o" /> Covardia, submissÃ£o</label>
              <label><input type="checkbox" value="Sensualidade descontrolada" /> Sensualidade descontrolada</label>
            </div>
          </div>
        </div>
      </section>

      <!-- AR -->
      <section class="element-section">
        <h2>ğŸŒ¬ï¸ Ar</h2>
        <p class="pergunta">Minha mente foi clara e criativa, ou dispersa e arrogante?</p>
        <div class="grid-2">
          <div>
            <h3>Qualidades Positivas</h3>
            <div class="check-grid" data-element="ar" data-type="positivo">
              <label><input type="checkbox" value="Intelecto Ã¡gil, raciocÃ­nio lÃ³gico" /> Intelecto Ã¡gil, raciocÃ­nio lÃ³gico</label>
              <label><input type="checkbox" value="Criatividade e imaginaÃ§Ã£o" /> Criatividade e imaginaÃ§Ã£o</label>
              <label><input type="checkbox" value="ComunicaÃ§Ã£o clara e persuasiva" /> ComunicaÃ§Ã£o clara e persuasiva</label>
              <label><input type="checkbox" value="Senso de justiÃ§a e equilÃ­brio" /> Senso de justiÃ§a e equilÃ­brio</label>
              <label><input type="checkbox" value="Flexibilidade mental" /> Flexibilidade mental</label>
              <label><input type="checkbox" value="Sociabilidade" /> Sociabilidade</label>
            </div>
          </div>
          <div>
            <h3>Qualidades Negativas</h3>
            <div class="check-grid" data-element="ar" data-type="negativo">
              <label><input type="checkbox" value="Instabilidade, superficialidade" /> Instabilidade, superficialidade</label>
              <label><input type="checkbox" value="Tagarelice, falsidade" /> Tagarelice, falsidade</label>
              <label><input type="checkbox" value="IndecisÃ£o" /> IndecisÃ£o</label>
              <label><input type="checkbox" value="Orgulho intelectual, arrogÃ¢ncia mental" /> Orgulho intelectual, arrogÃ¢ncia mental</label>
              <label><input type="checkbox" value="DesatenÃ§Ã£o, dispersÃ£o" /> DesatenÃ§Ã£o, dispersÃ£o</label>
              <label><input type="checkbox" value="TendÃªncia Ã  mentira ou manipulaÃ§Ã£o" /> TendÃªncia Ã  mentira ou manipulaÃ§Ã£o</label>
            </div>
          </div>
        </div>
      </section>

      <!-- TERRA -->
      <section class="element-section">
        <h2>ğŸŒ Terra</h2>
        <p class="pergunta">Mantive disciplina e estabilidade, ou fui rÃ­gido e medroso?</p>
        <div class="grid-2">
          <div>
            <h3>Qualidades Positivas</h3>
            <div class="check-grid" data-element="terra" data-type="positivo">
              <label><input type="checkbox" value="Estabilidade, firmeza" /> Estabilidade, firmeza</label>
              <label><input type="checkbox" value="PerseveranÃ§a, paciÃªncia" /> PerseveranÃ§a, paciÃªncia</label>
              <label><input type="checkbox" value="Disciplina e ordem" /> Disciplina e ordem</label>
              <label><input type="checkbox" value="Confiabilidade, responsabilidade" /> Confiabilidade, responsabilidade</label>
              <label><input type="checkbox" value="Praticidade e senso de realidade" /> Praticidade e senso de realidade</label>
              <label><input type="checkbox" value="Autocontrole" /> Autocontrole</label>
            </div>
          </div>
          <div>
            <h3>Qualidades Negativas</h3>
            <div class="check-grid" data-element="terra" data-type="negativo">
              <label><input type="checkbox" value="ObstinaÃ§Ã£o rÃ­gida" /> ObstinaÃ§Ã£o rÃ­gida</label>
              <label><input type="checkbox" value="AvarÃ­cia, materialismo" /> AvarÃ­cia, materialismo</label>
              <label><input type="checkbox" value="DesconfianÃ§a" /> DesconfianÃ§a</label>
              <label><input type="checkbox" value="IndolÃªncia, teimosia" /> IndolÃªncia, teimosia</label>
              <label><input type="checkbox" value="Falta de criatividade" /> Falta de criatividade</label>
              <label><input type="checkbox" value="Pessimismo, medo excessivo" /> Pessimismo, medo excessivo</label>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>ğŸ·ï¸ Gatilhos / Tags do dia</h2>
        <p class="muted">Adicione palavras-chave (ex.: trabalho, famÃ­lia, meditaÃ§Ã£o). Pressione Enter para criar.</p>
        <div id="tagsWrap" class="tags">
          <input id="tagInput" type="text" placeholder="Digite e pressione Enter">
          <div id="tagsList" class="tags-list"></div>
        </div>
      </section>

      <!-- RESUMO & TRANSMUTAÃ‡ÃƒO -->
      <section class="card">
        <h2>ğŸ§­ Resumo, Balanceamento & TransmutaÃ§Ã£o</h2>
        <div id="resumoContainer" class="resumo"></div>
        <textarea id="notas" placeholder="AnotaÃ§Ãµes do dia: propostas de comportamento, reflexÃµes e anÃ¡lises..."></textarea>
      </section>
    </section>

    <!-- HISTÃ“RICO -->
    <section id="historico" class="tab-content">
      <div class="card">
        <div class="flex-row gap">
          <div class="grow">
            <h2>ğŸ“† Registros</h2>
            <p>Veja suas sessÃµes salvas, exporte/import e observe tendÃªncias.</p>
          </div>
          <div class="actions-row">
            <button id="btnExportarCSV" class="ghost">Exportar CSV</button>
            <button id="btnExportarJSON" class="ghost">Exportar JSON</button>
            <label class="import-label">
              Importar JSON
              <input type="file" id="inputImportarJSON" accept=".json" />
            </label>
          </div>
        </div>
        <div id="tabelaHistorico"></div>
      </div>

      <div class="card">
        <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
        <div class="grid-2">
          <div>
            <h3>Pesos por elemento</h3>
            <p class="muted">Multiplicadores aplicados ao saldo diÃ¡rio de cada elemento.</p>
            <div class="weights">
              <label>ğŸ”¥ Fogo <input id="w_fogo" type="number" step="0.1" min="0" value="1"></label>
              <label>ğŸ’§ Ãgua <input id="w_agua" type="number" step="0.1" min="0" value="1"></label>
              <label>ğŸŒ¬ï¸ Ar <input id="w_ar" type="number" step="0.1" min="0" value="1"></label>
              <label>ğŸŒ Terra <input id="w_terra" type="number" step="0.1" min="0" value="1"></label>
            </div>
            <button id="btnSalvarPesos" class="primary">Salvar pesos</button>
          </div>
          <div>
            <h3>Criptografia (opcional)</h3>
            <p class="muted">Proteja seus dados com senha local. Se perder a senha, os dados criptografados nÃ£o poderÃ£o ser recuperados.</p>
            <label>Senha: <input id="cryptoPass" type="password" placeholder="Defina/insira sua senha"></label>
            <div class="actions-row">
              <button id="btnAtivarCrypto" class="ghost">Ativar/Atualizar</button>
              <button id="btnDesativarCrypto" class="ghost">Desativar</button>
            </div>
            <small class="muted">Usa PBKDF2 + AES-GCM via Web Crypto API no navegador.</small>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“ˆ TendÃªncias</h2>
        <p>Saldo diÃ¡rio por elemento (positivos âˆ’ negativos, ponderado por intensidades e pesos).</p>
        <div class="flex-row gap">
          <label>Intensidade mÃ­nima para considerar no grÃ¡fico
            <select id="minIntensity">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </label>
          <button id="btnRecalcularGrafico" class="ghost">Recalcular</button>
        </div>
        <div class="chart-wrap">
          <canvas id="chartSaldo" width="1200" height="380"></canvas>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ” Backup cifrado</h2>
        <p class="muted">Exporte/importe um snapshot criptografado (usa a mesma senha de criptografia, em <b>ConfiguraÃ§Ãµes</b>).</p>
        <div class="actions-row">
          <button id="btnExportBackup" class="ghost">Exportar backup (.enc.json)</button>
          <label class="import-label">Importar backup
            <input type="file" id="inputImportBackup" accept=".json,.enc.json">
          </label>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ—“ï¸ RelatÃ³rio semanal</h2>
        <p>Gere um resumo imprimÃ­vel da Ãºltima semana (ou intervalo escolhido).</p>
        <div class="flex-row gap">
          <label>InÃ­cio <input id="repStart" type="date"></label>
          <label>Fim <input id="repEnd" type="date"></label>
          <button id="btnRelatorio" class="primary">Gerar relatÃ³rio</button>
          <button id="btnImprimir" class="ghost">Imprimir / salvar PDF</button>
        </div>
        <div id="relatorioHTML" class="report"></div>
      </div>
    </section>

    <!-- AJUDA / GUIA -->
    <section id="ajuda" class="tab-content">
      <article class="card">
        <h2>Guia RÃ¡pido</h2>
        <p>Cada pessoa mapeia sua alma (â€œespelho da almaâ€) identificando onde os elementos estÃ£o em excesso ou em falta, equilibrando-os pela introspecÃ§Ã£o e prÃ¡tica espiritual.</p>
        <h3>Como usar</h3>
        <ol>
          <li>Escolha um momento de silÃªncio (apÃ³s meditaÃ§Ã£o Ã© ideal).</li>
          <li>Marque as qualidades positivas e negativas que se manifestaram hoje em cada elemento.</li>
          <li>Avalie o equilÃ­brio geral e leia as propostas de transmutaÃ§Ã£o geradas ao final.</li>
          <li>Escreva suas anotaÃ§Ãµes e salve. Reveja no histÃ³rico semanalmente.</li>
        </ol>
        <h3>EquilÃ­brio por excesso</h3>
        <ul>
          <li>Excesso de <b>Fogo</b> â†’ pratique calma, paciÃªncia, compaixÃ£o.</li>
          <li>Excesso de <b>Ãgua</b> â†’ cultive disciplina, aÃ§Ã£o, firmeza.</li>
          <li>Excesso de <b>Ar</b> â†’ treine concentraÃ§Ã£o, silÃªncio, presenÃ§a.</li>
          <li>Excesso de <b>Terra</b> â†’ cultive flexibilidade, criatividade, alegria.</li>
        </ul>
        <p><i>Objetivo:</i> transmutar o negativo em positivo, purificando e integrando os elementos em harmonia.</p>
      </article>
    </section>
  </main>

  <footer class="app-footer">
    <small>Feito para prÃ¡tica diÃ¡ria de autoconhecimento. Seus dados ficam no seu dispositivo (localStorage).</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
